<?php
namespace AIPM\Admin; use AIPM\Support\Capabilities; class SettingsPage{ const SLUG='gatekeeper-ai'; public static function menu(): void { add_management_page(__('Gatekeeper AI','gatekeeper-ai'),__('Gatekeeper AI','gatekeeper-ai'),'manage_options',self::SLUG,[self::class,'render']); } public static function assets($hook): void { if($hook!=='tools_page_'.self::SLUG) return; wp_enqueue_style('gatekeeper-ai-admin', GKAI_URL.'assets/admin.css',[],GKAI_VERSION); wp_enqueue_script('gatekeeper-ai-admin', GKAI_URL.'src/Admin/Assets/index.js',['wp-element','wp-api-fetch','wp-i18n','wp-components'],GKAI_VERSION,true); wp_localize_script('gatekeeper-ai-admin','GKAI',['nonce'=>wp_create_nonce('wp_rest'),'rest'=>esc_url_raw(rest_url('aipm/v1'))]); } public static function render(): void { if(!Capabilities::can_manage()) wp_die(__('Insufficient permissions','gatekeeper-ai')); echo '<div class="wrap"><h1>Gatekeeper AI</h1><div id="gkai-app"><p>Loadingâ€¦</p></div></div>'; } }
